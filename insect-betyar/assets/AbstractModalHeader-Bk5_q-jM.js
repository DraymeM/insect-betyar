import{o as Et,s as m,i as vt,u as g,l as K,e as Tt}from"./useEventCallback-DPgXPFwG.js";import{d as $,b as bt,a as Rt,r as H,c as U,h as yt}from"./hasClass-sJrLr2td.js";import{r as a,j as c,i as Ct}from"./router-CAEm-37Z.js";import{i as xt}from"./Fade-Cz9xL04f.js";import{C as wt}from"./CloseButton-CXhTuSYG.js";function Mt(e){const t=a.useRef(null);return a.useEffect(()=>{t.current=e}),t.current}var Ot=Function.prototype.bind.call(Function.prototype.call,[].slice);function u(e,t){return Ot(e.querySelectorAll(t))}const kt="data-rr-ui-",At="rrUi";function Bt(e){return`${kt}${e}`}function Xt(e){return`${At}${e}`}function O(e){e===void 0&&(e=Et());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Nt(e){const t=a.useRef(e);return t.current=e,t}function Lt(e){const t=Nt(e);a.useEffect(()=>()=>t.current(),[])}function Ft(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const G=Bt("modal-open");class B{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Ft(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[o]:r.style[o]},t.scrollBarWidth&&(n[o]=`${parseInt(m(r,o)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(G,""),m(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(G),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const St=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function jt(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}let k;function Dt(e){return k||(k=new B({ownerDocument:e==null?void 0:e.document})),k}function Pt(e){const t=$(),n=e||Dt(t),o=a.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:a.useCallback(r=>{o.current.dialog=r},[]),setBackdropRef:a.useCallback(r=>{o.current.backdrop=r},[])})}const X=a.forwardRef((e,t)=>{let{show:n=!1,role:o="dialog",className:r,style:i,children:T,backdrop:h=!0,keyboard:b=!0,onBackdropClick:N,onEscapeKeyDown:L,transition:Y,runTransition:q,backdropTransition:z,runBackdropTransition:J,autoFocus:Q=!0,enforceFocus:Z=!0,restoreFocus:tt=!0,restoreFocusOptions:et,renderDialog:F,renderBackdrop:nt=s=>c.jsx("div",Object.assign({},s)),manager:ot,container:rt,onShow:S,onHide:j=()=>{},onExit:st,onExited:D,onExiting:at,onEnter:it,onEntering:lt,onEntered:ct}=e,dt=jt(e,St);const d=$(),p=bt(rt),l=Pt(ot),ut=Rt(),ft=Mt(n),[R,P]=a.useState(!n),E=a.useRef(null);a.useImperativeHandle(t,()=>l,[l]),vt&&!ft&&n&&(E.current=O(d==null?void 0:d.document)),n&&R&&P(!1);const W=g(()=>{if(l.add(),x.current=K(document,"keydown",mt),C.current=K(document,"focus",()=>setTimeout(ht),!0),S&&S(),Q){var s,_;const M=O((s=(_=l.dialog)==null?void 0:_.ownerDocument)!=null?s:d==null?void 0:d.document);l.dialog&&M&&!U(l.dialog,M)&&(E.current=M,l.dialog.focus())}}),y=g(()=>{if(l.remove(),x.current==null||x.current(),C.current==null||C.current(),tt){var s;(s=E.current)==null||s.focus==null||s.focus(et),E.current=null}});a.useEffect(()=>{!n||!p||W()},[n,p,W]),a.useEffect(()=>{R&&y()},[R,y]),Lt(()=>{y()});const ht=g(()=>{if(!Z||!ut()||!l.isTopModal())return;const s=O(d==null?void 0:d.document);l.dialog&&s&&!U(l.dialog,s)&&l.dialog.focus()}),gt=g(s=>{s.target===s.currentTarget&&(N==null||N(s),h===!0&&j())}),mt=g(s=>{b&&xt(s)&&l.isTopModal()&&(L==null||L(s),s.defaultPrevented||j())}),C=a.useRef(),x=a.useRef(),pt=(...s)=>{P(!0),D==null||D(...s)};if(!p)return null;const I=Object.assign({role:o,ref:l.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},dt,{style:i,className:r,tabIndex:-1});let w=F?F(I):c.jsx("div",Object.assign({},I,{children:a.cloneElement(T,{role:"document"})}));w=H(Y,q,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:st,onExiting:at,onExited:pt,onEnter:it,onEntering:lt,onEntered:ct,children:w});let v=null;return h&&(v=nt({ref:l.setBackdropRef,onClick:gt}),v=H(z,J,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:v})),c.jsx(c.Fragment,{children:Ct.createPortal(c.jsxs(c.Fragment,{children:[v,w]}),p)})});X.displayName="Modal";const Yt=Object.assign(X,{Manager:B});function Wt(e,t){e.classList?e.classList.add(t):yt(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function V(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function It(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=V(e.className,t):e.setAttribute("class",V(e.className&&e.className.baseVal||"",t))}const f={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class _t extends B{adjustAndStore(t,n,o){const r=n.style[t];n.dataset[t]=r,m(n,{[t]:`${parseFloat(m(n,t))+o}px`})}restore(t,n){const o=n.dataset[t];o!==void 0&&(delete n.dataset[t],m(n,{[t]:o}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Wt(n,"modal-open"),!t.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(n,f.FIXED_CONTENT).forEach(i=>this.adjustAndStore(o,i,t.scrollBarWidth)),u(n,f.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-t.scrollBarWidth)),u(n,f.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();It(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(n,f.FIXED_CONTENT).forEach(i=>this.restore(o,i)),u(n,f.STICKY_CONTENT).forEach(i=>this.restore(r,i)),u(n,f.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let A;function qt(e){return A||(A=new _t(e)),A}const Kt=a.createContext({onHide(){}}),zt=a.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:o,children:r,...i},T)=>{const h=a.useContext(Kt),b=Tt(()=>{h==null||h.onHide(),o==null||o()});return c.jsxs("div",{ref:T,...i,children:[r,n&&c.jsx(wt,{"aria-label":e,variant:t,onClick:b})]})});export{zt as A,Yt as B,Kt as M,Xt as a,_t as b,Bt as d,qt as g,u as q};
