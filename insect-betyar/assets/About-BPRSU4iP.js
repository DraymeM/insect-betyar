const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Card-Dj-05zs8.js","assets/router-CAEm-37Z.js","assets/react-DbHEDQBy.js","assets/index-nKWK0Wqp.js","assets/index-Clad6B2q.css","assets/index-B8XXmozB.js","assets/Spinner-B0iXgm65.js","assets/CategoryCard-0xLr_0v7.js","assets/repo-CNS-oR-b.js","assets/FormControl-DLmQEf5B.js","assets/warning-C13o4bTx.js","assets/index-CscOspqo.js","assets/Button-4BwiO8O-.js","assets/Button-WaTH4O-5.js","assets/LimitSelector-ChQ9f60j.js","assets/Pagination-Dsb-UKP3.js"])))=>i.map(i=>d[i]);
import{u as D,c as F,S as U,y as V,_ as E}from"./index-nKWK0Wqp.js";import{r as c,j as e,f as z,g as q,h as Q,R as I,O as K}from"./router-CAEm-37Z.js";import{c as H,d as J}from"./index-B8XXmozB.js";import{f as X,a as Y,b as Z}from"./repo-CNS-oR-b.js";import{a as O,c as ee}from"./FormControl-DLmQEf5B.js";import{B}from"./Button-4BwiO8O-.js";const G=c.createContext(null);G.displayName="InputGroupContext";const T=c.forwardRef(({className:a,bsPrefix:t,as:s="span",...f},i)=>(t=D(t,"input-group-text"),e.jsx(s,{ref:i,className:F(a,t),...f})));T.displayName="InputGroupText";const te=a=>e.jsx(T,{children:e.jsx(O,{type:"checkbox",...a})}),re=a=>e.jsx(T,{children:e.jsx(O,{type:"radio",...a})}),W=c.forwardRef(({bsPrefix:a,size:t,hasValidation:s,className:f,as:i="div",...l},o)=>{a=D(a,"input-group");const d=c.useMemo(()=>({}),[]);return e.jsx(G.Provider,{value:d,children:e.jsx(i,{ref:o,...l,className:F(f,a,t&&`${a}-${t}`,s&&"has-validation")})})});W.displayName="InputGroup";const ne=Object.assign(W,{Text:T,Radio:re,Checkbox:te});function A(a,t,s){var f=this,i=c.useRef(null),l=c.useRef(0),o=c.useRef(null),d=c.useRef([]),p=c.useRef(),x=c.useRef(),N=c.useRef(a),y=c.useRef(!0);N.current=a;var v=typeof window<"u",w=!t&&t!==0&&v;if(typeof a!="function")throw new TypeError("Expected a function");t=+t||0;var C=!!(s=s||{}).leading,k=!("trailing"in s)||!!s.trailing,j="maxWait"in s,P="debounceOnServer"in s&&!!s.debounceOnServer,S=j?Math.max(+s.maxWait||0,t):null;c.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var b=c.useMemo(function(){var R=function(u){var m=d.current,L=p.current;return d.current=p.current=null,l.current=u,x.current=N.current.apply(L,m)},g=function(u,m){w&&cancelAnimationFrame(o.current),o.current=w?requestAnimationFrame(u):setTimeout(u,m)},_=function(u){if(!y.current)return!1;var m=u-i.current;return!i.current||m>=t||m<0||j&&u-l.current>=S},r=function(u){return o.current=null,k&&d.current?R(u):(d.current=p.current=null,x.current)},n=function u(){var m=Date.now();if(_(m))return r(m);if(y.current){var L=t-(m-i.current),M=j?Math.min(L,S-(m-l.current)):L;g(u,M)}},h=function(){if(v||P){var u=Date.now(),m=_(u);if(d.current=[].slice.call(arguments),p.current=f,i.current=u,m){if(!o.current&&y.current)return l.current=i.current,g(n,t),C?R(i.current):x.current;if(j)return g(n,t),R(i.current)}return o.current||g(n,t),x.current}};return h.cancel=function(){o.current&&(w?cancelAnimationFrame(o.current):clearTimeout(o.current)),l.current=0,d.current=i.current=p.current=o.current=null},h.isPending=function(){return!!o.current},h.flush=function(){return o.current?r(Date.now()):x.current},h},[C,j,t,S,k,w,v,P]);return b}const ae=({onSearch:a})=>{const[t,s]=c.useState(""),f=()=>{a(t.trim())},i=l=>{s(l.target.value)};return e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs(ne,{className:"mb-6",style:{width:"100%",maxWidth:"400px"},children:[e.jsx(ee,{placeholder:"Keresés...","aria-label":"Search",value:t,onChange:i,className:"bg-dark text-light border-secondary shadow-sm placeholder-text-light"}),e.jsx(B,{variant:"outline-secondary",onClick:f,style:{backgroundColor:"#41d5f5",borderColor:"#41d5f5",color:"#fff"},children:e.jsx(H,{})})]})})},se=I.lazy(()=>E(()=>import("./Card-Dj-05zs8.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ce=I.lazy(()=>E(()=>import("./CategoryCard-0xLr_0v7.js"),__vite__mapDeps([7,1,2,3,4,5,8,9,10,11,12,13]))),oe=I.lazy(()=>E(()=>import("./LimitSelector-ChQ9f60j.js"),__vite__mapDeps([14,1,2,12,3,4,13]))),$=I.lazy(()=>E(()=>import("./Pagination-Dsb-UKP3.js"),__vite__mapDeps([15,1,2,5]))),he=()=>{const a=z(),t=q(),{category:s,id:f}=Q({strict:!1}),i=new URLSearchParams(t.search),l=parseInt(i.get("page")||"1",10),o=parseInt(i.get("limit")||"5",10),d=i.get("search")||"",[p,x]=c.useState([]),[N,y]=c.useState([]),[v,w]=c.useState(0),C=A(r=>{if(r<1||r>Math.ceil(v/o))return;const n=new URLSearchParams(t.search);n.set("page",r.toString()),a({to:`${t.pathname}?${n.toString()}`})},300),k=A(r=>{const n=new URLSearchParams(t.search);n.set("page","1"),n.set("limit",r.toString()),a({to:`${t.pathname}?${n.toString()}`})},300),j=r=>{const n=new URLSearchParams(t.search);n.set("search",r||""),n.set("page","1"),a({to:`${t.pathname}?${n.toString()}`})},P=r=>{const n=new URLSearchParams(t.search);n.set("page","1"),n.set("limit","10"),n.delete("category"),n.delete("search"),a({to:`/about/category/${r}?${n.toString()}`})},[S,b]=c.useState(!1),R=()=>{const r=new URLSearchParams(t.search);r.delete("category"),r.delete("search"),r.delete("page"),r.delete("limit"),b(!0),a({to:`/about?${r.toString()}`})};c.useEffect(()=>((async()=>{try{const n=await X();y(n);let h=[];d?h=await Y(d):h=await Z();const u=s?h.filter(m=>m.category===s):h;w(u.length),x(u.slice((l-1)*o,l*o)),u.length===0&&!g.current&&!S&&(V.info("Nincsen ilyen termék a keresési feltételek alapján!"),g.current=!0)}catch(n){console.error("Error loading the page:",n)}})(),()=>{g.current=!1,b(!1)}),[o,s,d,l,S]);const g=I.useRef(!1),_=Math.ceil(v/o);return f?e.jsx(K,{}):e.jsx(c.Suspense,{fallback:e.jsx(U,{}),children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center mt-5 w-100 text-center overflow-hidden",children:[!s&&e.jsx("div",{className:"d-flex flex-wrap justify-content-center mt-5 w-100 px-0",style:{gap:"1.5rem",minWidth:"80vw",maxWidth:"100vw"},children:N.map(r=>e.jsx(ce,{category:r.name,image:r.image,onClick:()=>P(r.name)},r.name))}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex mt-5 justify-content-center align-items-center gap-3 flex-wrap",children:[e.jsx("div",{className:"d-flex justify-content-start",children:e.jsxs(B,{onClick:R,className:"btn btn-info text-white d-inline-flex align-items-center",children:[e.jsx(J,{className:"me-2"}),"Vissza"]})}),e.jsx(ae,{onSearch:j}),e.jsx(oe,{value:o,options:["5","10","15","25"],limitLabel:"Limit: ",onLimitChange:k})]}),e.jsx($,{currentPage:l,totalPages:_,onPageChange:C}),p.length>0?e.jsx("div",{className:"d-flex flex-wrap justify-content-center w-100 px-0",style:{gap:"1.5rem",minWidth:"80vw",maxWidth:"100vw"},children:p.map(r=>e.jsx(se,{id:r.id,name:r.name,picture:r.picture,price:r.price,category:s},r.id))}):e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{className:"text-info fs-4",children:"Nincsen ilyen termék a keresési feltételek alapján!"})}),e.jsx($,{currentPage:l,totalPages:_,onPageChange:C})]})]})})};export{he as A,A as c};
