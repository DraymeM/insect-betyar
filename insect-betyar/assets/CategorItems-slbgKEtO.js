import{r as d,j as e,g as H,h as Q,f as V,R as L,O as S}from"./router-Cj35iyZR.js";import{c as _,d as K,e as U,f as X,g as q,h as J}from"./index-QWC4VT8F.js";import{a as Y,b as Z}from"./repo-Dt3sVYhM.js";import{c as I}from"./index.module-CcDiQsdr.js";import{d as E,c as D,S as T,y as $}from"./index-By1kFIfD.js";import{a as F,c as P}from"./FormControl-D1OrpYFH.js";import{B as b}from"./Button-CzOC50nt.js";import{C as ee}from"./Card-Be6VhDY5.js";const G=d.createContext(null);G.displayName="InputGroupContext";const y=d.forwardRef(({className:s,bsPrefix:t,as:a="span",...i},m)=>(t=E(t,"input-group-text"),e.jsx(a,{ref:m,className:D(s,t),...i})));y.displayName="InputGroupText";const se=s=>e.jsx(y,{children:e.jsx(F,{type:"checkbox",...s})}),te=s=>e.jsx(y,{children:e.jsx(F,{type:"radio",...s})}),A=d.forwardRef(({bsPrefix:s,size:t,hasValidation:a,className:i,as:m="div",...r},c)=>{s=E(s,"input-group");const h=d.useMemo(()=>({}),[]);return e.jsx(G.Provider,{value:h,children:e.jsx(m,{ref:c,...r,className:D(i,s,t&&`${s}-${t}`,a&&"has-validation")})})});A.displayName="InputGroup";const ae=Object.assign(A,{Text:y,Radio:te,Checkbox:se}),re=({onSearch:s})=>{const[t,a]=d.useState(""),i=()=>{s(t.trim())},m=r=>{a(r.target.value)};return e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs(ae,{className:"mb-6",style:{width:"100%",maxWidth:"400px"},children:[e.jsx(P,{placeholder:"Keresés...","aria-label":"Search",value:t,onChange:m,className:"bg-dark text-light border-secondary shadow-sm placeholder-text-light"}),e.jsx(b,{variant:"outline-secondary",onClick:i,style:{backgroundColor:"#3498db",borderColor:"#3498db",color:"#fff"},children:e.jsx(_,{})})]})})},ne=({value:s,options:t,onLimitChange:a,limitLabel:i=""})=>{const[m,r]=d.useState(!1),c=l=>{const x=typeof l=="string"?parseInt(l,10):l;a(x),r(!1)},h=()=>{r(l=>!l)};return e.jsxs("div",{className:"btn-group",children:[e.jsxs(b,{type:"button",className:"btn bg-dark text-light border-secondary",children:[i&&e.jsxs("span",{children:[i," "]}),e.jsx("span",{className:"fw-bold",children:s})]}),e.jsx(b,{className:"btn bg-info text-white dropdown-toggle dropdown-toggle-split",onClick:h,children:e.jsx("span",{className:"visually-hidden",children:"Toggle Dropdown"})}),m&&e.jsx("ul",{className:"dropdown-menu show bg-dark border border-secondary",style:{top:"100%",left:0,minWidth:"7rem",backgroundColor:"transparent",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.5)"},children:t.map((l,x)=>e.jsx("li",{children:e.jsx(b,{className:"dropdown-item text-light text-center",onClick:()=>c(l),style:{backgroundColor:"transparent",color:"text-white",textAlign:"center"},onMouseEnter:o=>{o.currentTarget.classList.add("text-light"),o.currentTarget.classList.add("bg-secondary"),o.currentTarget.classList.remove("text-light"),o.currentTarget.classList.remove("bg-dark")},onMouseLeave:o=>{o.currentTarget.classList.remove("text-light"),o.currentTarget.classList.remove("bg-secondary"),o.currentTarget.classList.add("text-light"),o.currentTarget.classList.add("bg-dark")},children:l})},x))})]})},ie=5,R=({currentPage:s,totalPages:t,onPageChange:a})=>{const m=(()=>{const r=[];if(t<=ie)for(let c=1;c<=t;c++)r.push(c);else{const c=s>3,h=s<t-2;r.push(1),c&&r.push("...");const l=Math.max(2,s-1),x=Math.min(t-1,s+1);for(let o=l;o<=x;o++)r.push(o);h&&r.push("..."),r.push(t)}return r})();return e.jsx("nav",{"aria-label":"Page navigation",className:"mt-4 mx-1",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${s===1?"disabled":""} d-none d-sm-block`,children:e.jsx("button",{className:`page-link px-2 px-sm-3 mx-1 mx-sm-2 ${s===1?"bg-dark border-secondary text-secondary":"bg-info border-secondary text-white"}`,onClick:()=>a(1),disabled:s===1,children:e.jsx(K,{size:20})})}),e.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:e.jsx("button",{className:`page-link px-2 px-sm-3 mx-1 mx-sm-2 ${s===1?"bg-dark border-secondary text-secondary":"bg-info border-secondary text-white"}`,onClick:()=>a(s-1),disabled:s===1,children:e.jsx(U,{size:20})})}),m.map((r,c)=>r==="..."?e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link mx-1 bg-dark border-secondary text-secondary",children:"..."})},`ellipsis-${c}`):e.jsx("li",{className:`page-item ${r===s?"active":""}`,children:e.jsx("button",{className:`page-link px-2 px-sm-3 mx-1 mx-sm-2 ${r===s?"bg-info border-info text-white":"bg-dark border-secondary text-secondary"}`,onClick:()=>a(r),children:r})},r)),e.jsx("li",{className:`page-item ${s===t?"disabled":""}`,children:e.jsx("button",{className:`page-link px-2 px-sm-3 mx-1 mx-sm-2 ${s===t?"bg-dark border-secondary text-secondary":"bg-info border-secondary text-white"}`,onClick:()=>a(s+1),disabled:s===t,children:e.jsx(X,{size:20})})}),e.jsx("li",{className:`page-item ${s===t?"disabled":""} d-none d-sm-block`,children:e.jsx("button",{className:`page-link px-2 px-sm-3 mx-1 mx-sm-2 ${s===t?"bg-dark border-secondary text-secondary":"bg-info border-secondary text-white"}`,onClick:()=>a(t),disabled:s===t,children:e.jsx(q,{size:20})})})]})})},ue=()=>{const{category:s,id:t}=H({strict:!1}),a=Q({strict:!1}),i=V(),[m,r]=d.useState([]),[c,h]=d.useState(0),[l,x]=d.useState(!0),[o,M]=d.useState(null),N=L.useRef(!1),f=a.page||1,u=a.limit||10,j=a.search||"",w=I(n=>{n<1||n>Math.ceil(c/u)||(x(!0),i({search:p=>({...p,page:n})}))},300),B=I(n=>{n!==o&&(x(!0),M(n),i({search:p=>({...p,limit:n,page:1})}))},300),z=n=>{n!==j&&(x(!0),i({search:{...a,search:n,page:1}}))},O=()=>{i({to:"/about",search:{}})};d.useEffect(()=>{const p=setTimeout(async()=>{try{x(!0);let g=[];j?g=await Y(j):g=await Z();const v=g.filter(W=>W.category===s);h(v.length),r(v.slice((f-1)*u,f*u)),v.length===0&&!N.current&&($.info("Nincsen ilyen termék a keresési feltételek alapján!"),N.current=!0)}catch(g){console.error("Error loading items:",g),$.error("Hiba történt az adatok betöltése közben!")}finally{x(!1)}},300);return()=>{clearTimeout(p),N.current=!1}},[u,s,j,f]);const C=Math.ceil(c/u),k=L.useRef({page:1,limit:10,search:""});if(d.useEffect(()=>{t||(k.current={page:a.page||1,limit:a.limit||10})},[a,t]),d.useEffect(()=>{if(!t){const p=!a.page&&!a.limit&&!a.search?k.current:{page:a.page||1,limit:a.limit||10};i({search:p,replace:!0})}},[t]),t){const n={page:a.page||1,limit:a.limit||10,search:a.search||""};return k.current=n,i({to:`/about/category/${s}/item/${t}`,search:void 0,replace:!0}),e.jsx(S,{})}return e.jsx(d.Suspense,{fallback:e.jsx(T,{}),children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center mt-5 w-100 text-center overflow-hidden",children:[e.jsxs("div",{className:"d-flex mt-5 justify-content-center align-items-center gap-3 flex-wrap",children:[e.jsx("div",{className:"d-flex justify-content-start",children:e.jsxs(b,{onClick:O,className:"btn btn-info text-white d-inline-flex align-items-center",children:[e.jsx(J,{className:"me-2"}),"Vissza"]})}),e.jsx(re,{onSearch:z}),e.jsx(ne,{value:u,options:["5","10","15","25"],limitLabel:"Limit: ",onLimitChange:B})]}),!l&&e.jsx(e.Fragment,{children:e.jsx(R,{currentPage:f,totalPages:C,onPageChange:w})}),e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"300px"},children:l?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"30%"},children:e.jsx(T,{})}):m.length>0?e.jsx("div",{className:"d-flex flex-wrap justify-content-center w-100 px-0",style:{gap:"1.5rem",minWidth:"80vw",maxWidth:"100vw"},children:m.map(n=>e.jsx(ee,{id:n.id,name:n.name,picture:n.picture,price:n.price,category:s},n.id))}):e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{className:"text-info fs-4",children:"Nincsen ilyen termék a keresési feltételek alapján!"})})}),!l&&e.jsx(R,{currentPage:f,totalPages:C,onPageChange:w}),e.jsx(S,{})]})})};export{ue as C};
